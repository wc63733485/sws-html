<!DOCTYPE html>
<html xmlns:hidden="http://www.w3.org/1999/xhtml">
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../static/libs/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../static/layuiadmin/style/admin.css" media="all">
    <link rel="stylesheet" href="../static/css/font-awesome.min.css" media="all">
    <style type="text/css">
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        thead tr th {
            border-width: 1px;
        }

        .layui-table[lay-skin="row"] tr th {
            border-width: 1px 1px 1px 1px;
            border-top-width: 1px;
            border-left-width: 1px;
        }
    </style>

    <script src="../static/libs/jquery.min.js"></script>
    <script src="../static/libs/echarts.min.js"></script>
    <script src="../static/libs/sws-common.js"></script>
<!--    <script src="../static/libs/realChart.js"></script>-->
    <script src="../static/libs/layui/layui.js"></script>
</head>

<body>
<div class="layui-fluid" style="float: left;width: 15%;height: 96%;padding-right: 5px;">
    <div class="layui-card" style="height: 100%">
        <div class="layui-inline" style="width: 100%;">
            <div class="layui-input-block" style="margin-left:10px;margin-top:10px;margin-right: 10px">

                <input type="text" name="search" id="search" placeholder="请输入名称" autocomplete="off" class="layui-input"
                       style="margin-left: 0px;width: 60%;float: left">

                <button type="button" class="layui-btn layui-btn-sm layuiadmin-btn-admin"
                        style="margin-left:15px;margin-top:5px;float: left;background-color: #6bd9c2"
                        lay-menutree="search">
                    <i class="layui-icon layui-icon-search layuiadmin-button-btn" style="font-size: 20px;"></i>
                </button>
                <button type="button" class="layui-btn layui-btn-sm layuiadmin-btn-admin"
                        style="margin-left:5px;margin-top:5px;float: right;background-color: #23c6c8"
                        lay-menutree="reload">
                    <i class="layui-icon layui-icon-spread-left layuiadmin-button-btn" style="font-size: 20px;"></i>
                </button>
            </div>
            <hr>
        </div>

        <div id="assMenu" class="demo-tree"></div>
    </div>
</div>
<div class="layui-fluid" style="float: right;width: 82%;height: 96%;padding-left: 5px;">
    <div class="layui-card">
        <div class="layui-form layui-card-header layuiadmin-card-header-auto">
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label" style="text-align: left;width: 70px;">开始时间</label>
                    <div class="layui-input-block" style="margin-left:100px">
                        <input type="text" name="username" placeholder="请输入" id="starTime" class="layui-input"
                               placeholder="yyyy-MM-dd HH:mm:ss">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label" style="text-align: left;width: 70px">结束时间</label>
                    <div class="layui-input-block" style="margin-left:100px">
                        <input type="text" name="username" placeholder="请输入" id="endTime" class="layui-input"
                               placeholder="yyyy-MM-dd HH:mm:ss">
                    </div>
                </div>
                <!--                <div class="layui-inline">-->
                <!--                    <label class="layui-form-label" style="text-align: left;width: 50px">&nbsp;&nbsp;项&nbsp;&nbsp;&nbsp;目</label>-->
                <!--                    <div class="layui-input-block" style="margin-left:80px">-->
                <!--                        <input type="text" name="projectId" placeholder="请输入" autocomplete="off" class="layui-input">-->
                <!--                    </div>-->
                <!--                </div>-->
                <div class="layui-inline">
                    <button class="layui-btn layui-btn-sm layui-btn-radius layuiadmin-btn-admin"
                            style="background-color: #1ab394" lay-submit lay-filter="LAY-user-back-search">
                        <span style="text-align:center;display:block;"><i
                                class="layui-icon layui-icon-search layuiadmin-button-btn"
                                style="font-size: 14px;"> 查 询</i></span>
                    </button>
                </div>
                <div class="layui-inline">
                    <button class="layui-btn layui-btn-sm layui-btn-radius layuiadmin-btn-admin"
                            style="background-color: #f8ac59" data-type="reload"
                            style="background-color: orangered;">
                        <span style="text-align:center;display:block;"><i
                                class="layui-icon layui-icon-refresh layuiadmin-button-btn" style="font-size: 14px;"> 重 置</i></span>
                    </button>
                </div>
            </div>
        </div>

        <!--        <div class="layui-card-body" >-->
        <!--            <table class="layui-hide" id="user_table" lay-filter="user_table"></table>-->
        <!--        </div>-->

    </div>
    <div class="layui-tab layui-tab-card" lay-filter="real-tab" style="height: 80%;">
        <ul class="layui-tab-title">
            <li class="layui-this" lay-id="real-data" style="width: 22%">实时数据</li>
            <li lay-id="real-alarm" style="width: 23%">报警记录</li>
            <li lay-id="send-param" style="width: 23%">远程下参</li>
            <li lay-id="real-analysis" style="width: 23.9%">实时分析</li>
        </ul>
        <div class="layui-tab-content" style="height: 100%;background-color: white">
            <div class="layui-tab-item layui-show" style="height: 100%">
                <div class="layui-card-body" id="tt" style="width: 50%;height: 95%;padding: 0px 15px;" >

                    <table class="layui-table" id="demo1">

                    </table>
                </div>
            </div>
            <div class="layui-tab-item">2</div>
            <div class="layui-tab-item">3</div>
            <div class="layui-tab-item">4</div>
        </div>
    </div>


</div>

<!--<div class="box">-->
<!--    <div class="layui-form-item">-->
<!--        <div class="layui-inline">-->
<!--            <div class="layui-input-block" style="margin-left:10px">-->
<!--                <input type="text" name="projectId" placeholder="请输入" autocomplete="off" class="layui-input">-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="layui-inline">-->
<!--            <button class="layui-btn layui-btn-sm layui-btn-radius layuiadmin-btn-admin"-->
<!--                    style="background-color: #1ab394" lay-submit lay-filter="LAY-user-back-search">-->
<!--                        <span style="text-align:center;display:block;"><i-->
<!--                                class="layui-icon layui-icon-search layuiadmin-button-btn"-->
<!--                                style="font-size: 14px;"> 查 询</i></span>                        <button type="button" class="layui-btn layui-btn-sm" lay-menutree="reload">重置</button>-->
<!--            </button>-->
<!--        </div>-->
<!--        <div class="layui-input-block">-->
<!--            <div id="assMenu" class="demo-tree"></div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--<div style="float: right;background-color:white;margin-right:1%;margin-top:1%;border:1px solid #cccccc;border-color: #cccccc;width: 85%;height: 99%;">-->
<!--    <div class="layui-tab layui-tab-card" lay-filter="real" style="margin-top:0px;width: 100%;height: 100%;">-->
<!--        <ul class="layui-tab-title">-->
<!--            <li class="layui-this" style="width: 14%">实时状态</li>-->
<!--            <li style="width: 14%">统计数据</li>-->
<!--            <li style="width: 14%">远程设置</li>-->
<!--            <li style="width: 14%">历史数据</li>-->
<!--            <li style="width: 14%">异常信息<span class="layui-badge-dot"></span></li>-->
<!--        </ul>-->
<!--        <div class="layui-tab-content" style="height: 100%;">-->
<!--            <div class="layui-tab-item layui-show" style="height: 100%;width: 100%;">-->
<!--                <div style="width: 48%;height:90%;float: left;border: solid 1px #cccccc;box-shadow:1px 2px 3px #3B2E32;overflow-y:auto;">-->
<!--                    <table class="myTable" style="width: 100%">-->
<!--                        <thead>-->
<!--                        <tr>-->
<!--                            <th width="8%">编号</th>-->
<!--                            <th width="15%">数据项</th>-->
<!--                            <th width="10%">数值</th>-->
<!--                            <th width="12%">单位</th>-->
<!--                            <th width="20%">上传时间</th>-->
<!--                            <th width="15%">报警数值</th>-->
<!--                            <th width="25%">报警设置</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody id="realTbody">-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--                <div id="realChart"-->
<!--                     style="width: 50%;height:41%;float: right;position: relative;margin-right: 12px;border: solid 1px #cccccc;box-shadow:1px 2px 3px #3B2E32;">-->
<!--                </div>-->
<!--                <div style="width: 50%;height:2%;float: right;position: relative;">-->
<!--                </div>-->
<!--                <div style="width: 50%;height:46%;float: right;position: relative;margin-right: 12px;border: solid 1px #cccccc;box-shadow:1px 2px 3px #3B2E32;">-->
<!--                    <div id="historyClass" style="display:none;" ;>-->
<!--                        <div class="layui-inline" style="margin-left: 1%">-->
<!--                            <label class="layui-form-label">请选择时间</label>-->
<!--                            <div class="layui-input-inline">-->
<!--                                <input type="text" class="layui-input" id="dateQuery" style="width: 200%;">-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <div id="historyChart" style="height:90%;">-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="layui-tab-item" style="height: 100%;width: 100%;">-->
<!--                <div style="width: 30%;height:90%;float: left;border: solid 1px #cccccc;box-shadow:1px 2px 3px #3B2E32;overflow-y:auto;">-->
<!--                    <table class="myTable" style="width: 100%">-->
<!--                        <thead>-->
<!--                        <tr>-->
<!--                            <th width="10%">编号</th>-->
<!--                            <th width="50%">数据项</th>-->
<!--                            <th width="20%">数值</th>-->
<!--                            <th width="20%">单位</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody id="statisTbody">-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--                <div style="width: 68%;height:90%;float: right;position: relative;margin-right: 12px;border: solid 1px #cccccc;box-shadow:1px 2px 3px #3B2E32;">-->
<!--                    <div id="asChart"-->
<!--                         style="float: right;background-color:white;margin:1%;border-color: #cccccc;width: 97%;height: 96%;">-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="layui-tab-item" style="height: 100%;width: 100%;">-->
<!--                <div style="width: 100%;height:90%;float: left;border: solid 1px #cccccc;box-shadow:1px 2px 3px #3B2E32;overflow-y:auto;">-->
<!--                    <table class="myTable" style="width: 100%">-->
<!--                        <thead>-->
<!--                        <tr>-->
<!--                            <th width="5%">编号</th>-->
<!--                            <th width="10%">数据项</th>-->
<!--                            <th width="10%">数值</th>-->
<!--                            <th width="10%">单位</th>-->
<!--                            <th width="12%">数据接收时间</th>-->
<!--                            <th width="10%">参数设置</th>-->
<!--                            <th width="43%">参数介绍</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody id="setTbody">-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="layui-tab-item">设备组态</div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<script>
    $(function () {

        assignmentsMenu();

        function assignmentsMenu() {

            layui.use(['table', 'tree', 'util', 'element', 'laydate'], function () {
                var $ = layui.$
                    , tree = layui.tree
                    , table = layui.table
                    , util = layui.util
                    , element = layui.element
                    , laydate = layui.laydate;

                //查询 开始时间
                laydate.render({
                    elem: '#starTime'
                    , type: 'datetime'
                    , max: format(new Date().getTime())
                    , theme: 'grid'
                });

                //查询 结束时间
                laydate.render({
                    elem: '#endTime'
                    , type: 'datetime'
                    , max: format(new Date().getTime())
                    , theme: 'grid'
                });

                $('.site-demo-active').on('click', function () {
                    var othis = $(this), type = othis.data('type');
                    active[type] ? active[type].call(this, othis) : '';
                });


                function realDataInit(deviceId) {
                    var title1 = ""
                    var title2 = ""
                    var deviceTypeId = "";
                    $.ajax({
                        type: "GET",
                        url: deviceUrl + "/dl/qbd/" + deviceId,
                        async: false,
                        headers: {
                            'token': sessionStorage.getItem("token"),
                        },
                        success: function (r) {
                            deviceTypeId = r.data.deviceTypeId
                        },
                        error: function (e, t) {
                            if (e.status == 401) {
                                layer.msg("请刷新或重新登录", {icon: 0})
                                return;
                            }
                            i.errorView("接口请求开了小差..." + t), i.renderForm(), i.setColsWidth()
                        }
                    })

                    $.ajax({
                        type: "GET",
                        url: deviceTypeUrl + "/dt/qbdd/" + deviceTypeId,
                        async: false,
                        headers: {
                            'token': sessionStorage.getItem("token"),
                        },
                        success: function (r) {
                            title1 = r.data.name
                            $.ajax({
                                type: "GET",
                                url: deviceTypeUrl + "/dt/qbdpd/" + r.data.parentId,
                                async: false,
                                headers: {
                                    'token': sessionStorage.getItem("token"),
                                },
                                success: function (r) {
                                    title2 = "(" + r.data.name + ")"
                                },
                                error: function (e, t) {
                                    if (e.status == 401) {
                                        layer.msg("请刷新或重新登录", {icon: 0})
                                        return;
                                    }
                                }
                            })
                        },
                        error: function (e, t) {
                            if (e.status == 401) {
                                layer.msg("请刷新或重新登录", {icon: 0})
                                return;
                            }
                        }
                    })
                    //展示已知数据
                    table.render({
                        elem: '#demo1'
                        , url: deviceUnitUrl + "/du/qbdtd/" + deviceTypeId
                        , height: $("#tt").height()
                        , headers: {
                            'token': sessionStorage.getItem("token"),
                        }
                        , cols: [[{title: title1 + title2, align: "center", colspan: "7"}], [ //标题栏
                            {field: 'sortId', title: '排序', align: "center", width: 80, sort: true}
                            , {field: 'name', align: "center", title: '参数', width: 120}
                            , {field: 'referenceRange', align: "center", title: '参考值范围', minWidth: 120}
                            , {field: 'unit', align: "center", title: '单位', minWidth: 60}
                            , {field: 'time', align: "center", title: '上报时间', width: 100}
                            , {
                                field: 'value', align: "center", title: '数值', width: 60
                                // ,templet: function (res) {
                                //     if (res.value == 0) {
                                //         return '正常';
                                //     } else if (res.value == 1) {
                                //         return '停用';
                                //     } else {
                                //         return '-';
                                //     }
                                // }
                            }
                            , {field: 'remark', align: "center", title: '备注'}
                        ]]
                        , skin: 'row' //表格风格
                        , response: {
                            statusCode: 200 //重新规定成功的状态码为 200，table 组件默认为 0
                        }
                        // ,even: true
                        , size: "sm"
                        // , page: true //是否显示分页
                        // ,limits: [5]
                        // ,limit: 5 //每页默认显示的数量
                    });
                }

                //基本演示
                tree.render({
                    elem: '#assMenu'
                    , data: projectArrayToJson("")
                    , id: 'assMenu'
                    , isJump: false //是否允许点击节点时弹出新窗口跳转
                    , click: function (obj) {
                        var data = obj.data;  //获取当前点击的节点数据
                        if (data.isDevice != undefined && data.isDevice == true) {
                            realDataInit(data.id);
                            element.tabChange('real-tab', 'real-data'); //切换到：用户管理
                        }
                    }
                });

                //按钮事件
                util.event('lay-menutree', {
                    search: function (othis) {
                        var search = $("#search").val()
                        layer.load(2);
                        tree.render({
                            elem: '#assMenu'
                            , data: projectArrayToJson(search)
                            , id: 'assMenu'
                            , isJump: false //是否允许点击节点时弹出新窗口跳转
                            , click: function (obj) {
                                var data = obj.data;  //获取当前点击的节点数据
                                if (data.isDevice != undefined && data.isDevice == true) {
                                    realDataInit(data.id);
                                    element.tabChange('real-tab', 'real-data'); //切换到：用户管理
                                }
                            }
                        });
                        layer.closeAll('loading');
                    },
                    reload: function () {
                        layer.load(2);
                        $("#search").val("");
                        tree.render({
                            elem: '#assMenu'
                            , data: projectArrayToJson("")
                            , id: 'assMenu'
                            , isJump: false //是否允许点击节点时弹出新窗口跳转
                            , click: function (obj) {
                                var data = obj.data;  //获取当前点击的节点数据
                                if (data.isDevice != undefined && data.isDevice == true) {
                                    realDataInit(data.id);
                                    element.tabChange('real-tab', 'real-data'); //切换到：用户管理
                                }
                            }
                        });
                        layer.closeAll('loading');
                    }
                });
            });
        }

        function projectArrayToJson(search) {
            var res = [];
            $.ajax({
                type: "GET",
                url: sysUrl + "/pct/gpt",
                async: false,
                headers: {
                    'token': sessionStorage.getItem("token"),
                },
                success: function (r) {
                    var children = [];
                    for (var i = 0; i < r.data.length; i++) {
                        var project = new Object();
                        project.title = r.data[i].projectName;
                        project.id = r.data[i].projectId;
                        project.icon = "fa fa-bar-chart-o";
                        project.spread = true;
                        children = pumpHouseArrayToJson(r.data[i].projectId, search)
                        if (children.length != 0) {
                            project.children = children
                        }
                        if (search != "" && r.data[i].projectName.indexOf(search) != -1) {
                            project.textcolor = "red";
                        }
                        res.push(project)
                    }
                },
                error: function (e, t) {
                    if (e.status == 401) {
                        layer.msg("请刷新或重新登录", {icon: 0})
                        return;
                    }
                    i.errorView("接口请求开了小差..." + t), i.renderForm(), i.setColsWidth()
                }
            })
            return res
        }

        function pumpHouseArrayToJson(projectId, search) {
            var res = [];
            $.ajax({
                type: "GET",
                url: pumpHouseUrl + "/pmp/qpbp/" + projectId,
                async: false,
                headers: {
                    'token': sessionStorage.getItem("token"),
                },
                success: function (r) {
                    var children = [];
                    for (var i = 0; i < r.data.length; i++) {
                        var pumphouse = new Object();
                        pumphouse.title = r.data[i].pumphouseName;
                        pumphouse.id = r.data[i].pumphouseId;
                        pumphouse.icon = "fa fa-home fa-lg";
                        pumphouse.spread = true;
                        children = deviceArrayToJson(r.data[i].pumphouseId, search)
                        if (children.length != 0) {
                            pumphouse.children = children
                        }
                        if (search != "" && r.data[i].pumphouseName.indexOf(search) != -1) {
                            pumphouse.textcolor = "red";
                        }
                        res.push(pumphouse)
                    }
                },
                error: function (e, t) {
                    if (e.status == 401) {
                        layer.msg("请刷新或重新登录", {icon: 0})
                        return;
                    }
                    i.errorView("接口请求开了小差..." + t), i.renderForm(), i.setColsWidth()
                }
            });
            return res;
        }

        function deviceArrayToJson(pumphouseId, search) {
            var res = [];
            $.ajax({
                type: "GET",
                url: deviceUrl + "/dce/qdbd/" + pumphouseId,
                async: false,
                headers: {
                    'token': sessionStorage.getItem("token"),
                },
                success: function (r) {
                    for (var i = 0; i < r.data.length; i++) {
                        var device = new Object();
                        device.title = r.data[i].name;
                        device.id = r.data[i].deviceId;
                        device.bgcolor = "green";
                        device.icon = "fa fa-signal";
                        device.spread = true;
                        device.isDevice = true;
                        if (search != "" && r.data[i].name.indexOf(search) != -1) {
                            device.textcolor = "red";
                        }
                        res.push(device)
                    }
                },
                error: function (e, t) {
                    if (e.status == 401) {
                        layer.msg("请刷新或重新登录", {icon: 0})
                        return;
                    }
                    i.errorView("接口请求开了小差..." + t), i.renderForm(), i.setColsWidth()
                }
            });
            return res;
        }
    });

    //
    //
    // //点击事件 进入表格
    // function beforeClick(treeId, treeNode) {
    //     ptreeId = treeId;
    //     ptreeNode = treeNode;
    //     clearInterval(tableRefresh);
    //     clearInterval(inter1);
    //
    //     if (!treeNode.isParent) {
    //         // $("#historyChart").children().remove();
    //         // $("#realChart").children().remove();
    //         // if (oldTopic != '') {
    //         //     client.unsubscribe('Topic/flexem/fbox/' + oldTopic + '/system/MonitorData');
    //         //     client.unsubscribe('Topic/flexem/fbox/' + oldTopic + '/system/MDataPubNow');
    //         // }
    //         // client.subscribe('Topic/flexem/fbox/' + treeNode.id + '/system/MDataPubNow');
    //         // client.subscribe('Topic/flexem/fbox/' + treeNode.id + '/system/MonitorData');
    //         // oldTopic = treeNode.id;
    //         addTable(treeId, treeNode);
    //         return false;
    //     } else {
    //         return true;
    //     }
    // }
    //
    // var log, className = "dark";
    //
    // function beforeAsync(treeId, treeNode) {
    //     className = (className === "dark" ? "" : "dark");
    //     showLog("[ " + getTime() + " beforeAsync ]&nbsp;&nbsp;&nbsp;&nbsp;" + ((!!treeNode && !!treeNode.name) ? treeNode.name : "root"));
    //     return true;
    // }
    //
    // function onAsyncError(event, treeId, treeNode, XMLHttpRequest, textStatus, errorThrown) {
    //     showLog("[ " + getTime() + " onAsyncError ]&nbsp;&nbsp;&nbsp;&nbsp;" + ((!!treeNode && !!treeNode.name) ? treeNode.name : "root"));
    // }
    //
    // function onAsyncSuccess(event, treeId, treeNode, msg) {
    //     showLog("[ " + getTime() + " onAsyncSuccess ]&nbsp;&nbsp;&nbsp;&nbsp;" + ((!!treeNode && !!treeNode.name) ? treeNode.name : "root"));
    // }
    //
    // function statisData() {
    //     $.ajax({
    //             url: "http://39.96.74.32:14029/deviceUnit/getDeviceStatisParm?deviceId=" + ptreeNode.id,
    //             type: "GET",
    //             dataType: 'json',
    //             success: function (data) {
    //                 var html = "";
    //                 for (var a = 0; a < data.count; a++) {
    //
    //                     html += '<tr onclick=""><td>' + (a + 1)
    //                         + '</td><td>' + data.data[a].name
    //                         + '</td><td id=s"' + data.data[a].dataName + '">' + '-'
    //                         + ' </td><td>' + data.data[a].unit
    //                         + '</td></tr>'
    //                 }
    //                 $("#statisTbody").html(html)
    //
    //                 getDeviceData2(ptreeNode, data);
    //
    //             }
    //         }
    //     );
    // }
    //
    // function setData() {
    //     $.ajax({
    //             url: "http://39.96.74.32:14029/deviceUnit/getDeviceSetParm?deviceId=" + ptreeNode.id,
    //             type: "GET",
    //             dataType: 'json',
    //             success: function (data) {
    //                 var html = "";
    //                 for (var a = 0; a < data.count; a++) {
    //                     var warnbutton = "";
    //                     if (data.data[a].isSetData == 1 && data.data[a].isSetData == "1") {
    //                         warnbutton = "<button onclick='addzz()' style='height: 22px;line-height: 22px;padding: 0 5px;font-size: 12px;display: inline-block;background-color: #009688;color: #fff;white-space: nowrap;text-align: center;border: none; border-radius: 2px;cursor: pointer;'>设置参数</button>"
    //                     }
    //
    //                     html += '<tr onclick=""><td>' + (a + 1)
    //                         + '</td><td>' + data.data[a].name
    //                         + '</td><td id="' + data.data[a].dataName + '">' + '-'
    //                         + ' </td><td>' + data.data[a].unit
    //                         + '</td><td  id="time' + a + '">' + '-'
    //                         + '</td><td>' + warnbutton
    //                         + '</td><td>' + data.data[a].remake
    //                         + '</td></tr>'
    //                 }
    //                 $("#setTbody").html(html)
    //
    //                 getDeviceData3(ptreeNode, data);
    //
    //             }
    //         }
    //     );
    // }
    //
    //
    // function refreshNode(e) {
    //     var zTree = $.fn.zTree.getZTreeObj("treeDemo"),
    //         type = e.data.type,
    //         silent = e.data.silent,
    //         nodes = zTree.getSelectedNodes();
    //     if (nodes.length == 0) {
    //         alert("请先选择一个父节点");
    //     }
    //     for (var i = 0, l = nodes.length; i < l; i++) {
    //         zTree.reAsyncChildNodes(nodes[i], type, silent);
    //         if (!silent) zTree.selectNode(nodes[i]);
    //     }
    // }
    //
    // $(document).ready(function () {
    //     $.fn.zTree.init($("#treeDemo"), setting);
    //     $("#refreshNode").bind("click", {type: "refresh", silent: false}, refreshNode);
    //     $("#refreshNodeSilent").bind("click", {type: "refresh", silent: true}, refreshNode);
    //     $("#addNode").bind("click", {type: "add", silent: false}, refreshNode);
    //     $("#addNodeSilent").bind("click", {type: "add", silent: true}, refreshNode);
    // });
    //
    // layui.use(['element', 'laydate'], function () {
    //     var $ = layui.jquery
    //         , element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块
    //     var laydate = layui.laydate;
    //
    //     laydate.render({
    //         elem: '#dateQuery'
    //         , format: 'yyyy年MM月dd日'
    //     });
    //     //一些事件监听
    //     element.on('tab(real)', function (data) {
    //         if (data.index == 0) {
    //             // task(ptreeId, ptreeNode);
    //             var historyChart = echarts.init(document.getElementById('historyChart'));
    //             historyChart.clear();
    //             var realChart = echarts.init(document.getElementById('realChart'));
    //             realChart.clear();
    //         } else {
    //             clearInterval(tableRefresh);
    //             clearInterval(inter1);
    //         }
    //         if (data.index == 1) {
    //             statisData();
    //         }
    //         if (data.index == 2) {
    //             setData();
    //         }
    //     });
    // });
</script>
</body>
</html>